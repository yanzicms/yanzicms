/*** Created by A.J on 2020/10/21.*/$(document).ready(function(){if($("#partsval").text() != ''){var parts = JSON.parse($("#partsval").text());$.each(parts, function(index, value){$("#partsdiv").append($("#partshide").html());var obj = $("#partsdiv").children(":last");obj.find("input.partname").val(value.partname);obj.find("input.partalias").val(value.partalias).prop("readonly", true);obj.find("select.parttype").val(value.parttype);obj.find("input.defaults").val(value.defaults);});$.getpartsn();}$("#addparts").on("click", function(){$("#partsdiv").append($("#partshide").html());});$("#partsdiv").on("click", ".close", function(){$(this).parents(".onepart").remove();$.getpartsn();});$("#partsdiv").on("change", ".partname, .partalias, .parttype, .defaults", function(){$.getpartsn();});});$.extend({"getpartsn": function(){var parts = [];$("#partsdiv").children("div.onepart").each(function(){var isnew = 1;if($(this).find("input.partalias").prop("readonly")){isnew = 0;}var part = {partname: $(this).find(".partname").val(), partalias: $(this).find(".partalias").val(), parttype: $(this).find(".parttype").val(), defaults: $(this).find(".defaults").val(), isnew: isnew};parts.push(part);});$("#parts").val(JSON.stringify(parts));}});